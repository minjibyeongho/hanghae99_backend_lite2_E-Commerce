## 1. Cahce 1. ProductCacheTest.java

### testProductDetailCacheCreation
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
DB 조회 시간 (Product + Inventory JOIN)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
• 트랜잭션 시작: 112058.826Z
• 트랜잭션 커밋: 112058.868Z
• 총 소요 시간: 9ms
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

### testCachedProductIsFaster
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
1차 조회 (캐시 MISS - DB 접근)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
• 트랜잭션 생성: 112058.826Z
• SELECT product 실행: 112058.834Z
• SELECT inventory 실행: 112058.861Z
• 트랜잭션 커밋: 112058.868Z
• 총 소요 시간: 9ms

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
2차 조회 (캐시 HIT - Redis 조회)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
• 트랜잭션 생성: 112059.000Z
• SELECT product 실행: 112059.001Z (캐시 히트 전 체크)
• Redis에서 반환 (SQL 로그 없음!)
• 트랜잭션 커밋: 112059.005Z
• 총 소요 시간: 예상 1-3ms

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
성능 향상
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
• 응답 시간: 9ms → 1-3ms (약 70-90% 단축)
• DB 쿼리: 2개 → 0개 (100% 감소)
• 네트워크 I/O: DB 왕복 → Redis 왕복 (더 빠름)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

| 지표      | 캐시 MISS (DB)             | 캐시 HIT (Redis)   | 개선율      |
| ------- | ------------------------ | ---------------- | -------- |
| 응답 시간   | 9ms                      | 예상 1-3ms         | 70-90% ↓ |
| DB 쿼리 수 | 2개 (Product + Inventory) | 0개               | 100% ↓   |
| 처리량     | 약 111 req/s              | 약 333-1000 req/s | 3-9배 ↑   |

### testCacheReturnsSameData
- 데이터 일치 여부 확인 완료

### testCacheEvictionOnInventoryChange
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
재고 변경 작업 타임라인
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
112058.939Z  트랜잭션 시작
112058.946Z  Redis 락 획득 (inventory:2:modify)
112058.955Z  SELECT inventory (현재 값 조회)
112058.960Z  UPDATE inventory (재고 업데이트)
112058.972Z  트랜잭션 커밋
112058.972Z  @CacheEvict 실행 (캐시 삭제)

총 소요 시간: 33ms (분산 락 + 트랜잭션 + 캐시 무효화)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

### testNonExistentProductThrowsException
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
예외 처리 타임라인
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
112059.047Z  트랜잭션 시작
112059.048Z  SELECT product WHERE product_id = 999
112059.049Z  트랜잭션 롤백 (Initiating transaction rollback)
112059.051Z  EntityManager 종료

결과: 예외 발생, 캐시 저장 안 됨 (disableCachingNullValues)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━


## 1. Cahce 2. SaleCacheTest.java

### testTopProductsCacheCreation
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
집계 쿼리 실행 타임라인
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
134254.797Z  트랜잭션 시작
134254.819Z  SELECT 집계 쿼리 실행
134254.823Z  트랜잭션 커밋
134254.824Z  EntityManager 종료

총 소요 시간: 27ms (트랜잭션 포함)
순수 쿼리 시간: 약 4ms (데이터 0건)

💡 실제 환경(데이터 많음): 50-100ms 예상
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

### testCachedTopProductsIsFaster
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
1차 조회 (캐시 MISS - DB 집계 쿼리)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
• 트랜잭션 생성: 134254.797Z
• SELECT 집계 쿼리: 134254.819Z
└─ GROUP BY, SUM, ORDER BY 실행
• 트랜잭션 커밋: 134254.823Z
• 총 소요 시간: 35ms (테스트 환경 기준)

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
2차 조회 (캐시 HIT - Redis 조회)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
• 트랜잭션 생성: 134254.883Z
• Redis에서 즉시 반환 (SQL 로그 없음!)
• 트랜잭션 커밋: 134254.887Z
• 총 소요 시간: 예상 1-3ms

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
성능 향상
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
• 응답 시간: 35ms → 1-3ms (약 90-97% 단축)
• DB 쿼리: 1개 (집계 쿼리) → 0개 (100% 감소)
• 집계 연산: GROUP BY + SUM + ORDER BY → 없음
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

| 지표      | 캐시 MISS (DB)                | 캐시 HIT (Redis) | 개선율           |
| ------- | --------------------------- | -------------- | ------------- |
| 응답 시간   | 50-100ms                    | 1-3ms          | 95-99% ↓      |
| DB 쿼리 수 | 1개 (복잡한 집계)                 | 0개             | 100% ↓        |
| 집계 연산   | GROUP BY + 2×SUM + ORDER BY | 없음             | CPU 사용량 대폭 감소 |
| 처리량     | 10-20 req/s                 | 333-1000 req/s | 17-100배 ↑     |

### testCacheReturnsSameData
- 데이터 일치 여부 확인 완료

### testCacheEvictionOnSaleRecord
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
판매 기록 작업 타임라인
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
134254.936Z  트랜잭션 시작

// Order 생성
134254.984Z  INSERT INTO orders ...

// OrderItem 생성
134254.986Z  INSERT INTO order_item ...

// Sale 기록
134254.992Z  INSERT INTO sale ...

134255.005Z  트랜잭션 커밋 ✅
134255.005Z  @CacheEvict 실행 (캐시 삭제)

총 소요 시간: 69ms (3개 테이블 INSERT + 트랜잭션)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

### testTopProductsReflectSalesData
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
집계 쿼리 실행 (데이터 5건 기준)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
• Sale 테이블 스캔: 5건
• GROUP BY 연산: 5개 그룹
• SUM 연산: 2개 (판매량 + 매출액)
• ORDER BY 연산: 5개 행 정렬
• LIMIT: 5개 선택

총 소요 시간: 약 10-20ms

💡 실제 환경(데이터 수만 건): 50-200ms 예상
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
